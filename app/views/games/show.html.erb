<div class="container">

  <div class="infos-reservations">

    <div class="game-infos">
      <% if @game.photos.count.positive? %>
        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
           <% if @game.photos.count > 1 %>
          <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
          <% end %>
          <% if @game.photos.count > 2 %>
          <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
          <% end %>
        </ol>
        <div class="carousel-inner">

          <div class="carousel-item active">
            <%= cl_image_tag(@game.photos[0].key, class:"d-block w-100") %>
          </div>

          <% if @game.photos.count > 1 %>
            <div class="carousel-item">
              <%= cl_image_tag(@game.photos[1].key, class:"d-block w-100") %>
            </div>
          <% end %>

          <% if @game.photos.count > 2 %>
            <div class="carousel-item">
              <%= cl_image_tag(@game.photos[2].key, class:"d-block w-100") %>
            </div>
          <% end %>

        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
      <% end %>
      <%# carousel %>



      <h3><%= @game.name.capitalize %></h3>
      <%= @rating %>
      <% if @rating %>
        <i class="fas fa-star etoile"></i>
      <% end %>
      <p>number of players : <%= @game.number_of_players %></p>
      <p>Category : <%= @game.category.capitalize %></p>
      <%= link_to 'Back', games_path, class:"btn btn-back" %>
    </div>
    <div class="reservations">
      <h2><%= @game.price %>,00â‚¬</h2>
      <%= render "reservations/new", locales: [ @game, Reservation.new ] %>
    </div>

  </div>
</div>

<div class="container">

  <div class="reviews-container">

    <div class="reviews">
      <h3>Reviews</h3>
      <% @game.reviews.each do |review| %>
        <div class="review">
          <% case review.rating%>
          <% when 5%>
            <p class="rating"><i class="fas fa-star etoile"></i><i class="fas fa-star etoile pd-l"></i><i class="fas fa-star etoile pd-l"></i><i class="fas fa-star etoile pd-l"></i><i class="fas fa-star etoile pd-l"></i></p>
          <% when 4%>
            <p class="rating"><i class="fas fa-star etoile"></i><i class="fas fa-star etoile pd-l"></i><i class="fas fa-star etoile pd-l"></i><i class="fas fa-star etoile pd-l"></i></p>
          <% when 3%>
            <p class="rating"><i class="fas fa-star etoile"></i><i class="fas fa-star etoile pd-l"></i><i class="fas fa-star etoile pd-l"></i></p>
          <% when 2%>
            <p class="rating"><i class="fas fa-star etoile"></i><i class="fas fa-star etoile pd-l"></i></p>
          <% when 1%>
            <p class="rating"><i class="fas fa-star etoile"></i></p>
          <% end %>
          <p><%= review.comment %></p>
          <p><%= review.user.pseudo %></p>
          <%= link_to "Remove",
                review_path(review),
                method: :delete,
                data: { confirm: "Are you sure?" },
                class:"btn btn-remove"%>
        </div>
      <% end %>

    </div>

    <div class="review-form">
      <%= render "reviews/new", locales: [ @game, Review.new ] %>
    </div>

  </div>

</div>
